<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Harmony Ultimate (å…¨èƒ½ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #F0F9FF; color: #334155; -webkit-tap-highlight-color: transparent; }
        .card { background-color: white; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); padding: 1.25rem; margin-bottom: 1rem; transition: all 0.3s ease; border: 1px solid #e2e8f0; }
        .card:active { transform: scale(0.99); }
        .loading-spinner { border: 3px solid #f3f3f3; border-top: 3px solid #0ea5e9; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        /* Markdown Styles */
        .prose h3 { color: #0f172a; font-weight: 700; margin-top: 1em; margin-bottom: 0.5em; font-size: 1em; }
        .prose ul { list-style-type: disc; padding-left: 1.2em; margin-bottom: 0.5em; }
        .prose li { margin-bottom: 0.2em; }
        .prose strong { color: #be185d; font-weight: 600; }
        .prose p { margin-bottom: 0.5em; line-height: 1.5; }
        
        /* Custom Gradients for headers */
        .header-special { background: linear-gradient(135deg, #0284c7 0%, #2563eb 100%); } /* Blue */
        .header-daily { background: linear-gradient(135deg, #db2777 0%, #e11d48 100%); } /* Pink/Rose */
        
        #apiKeyModal { backdrop-filter: blur(5px); }
    </style>
</head>
<body class="antialiased pb-24">

    <!-- Navbar -->
    <header class="bg-slate-900 text-white py-3 shadow-lg sticky top-0 z-50">
        <div class="max-w-md mx-auto px-4 flex justify-between items-center">
            <div>
                <h1 class="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-rose-400">Harmony Ultimate</h1>
                <p class="text-slate-400 text-[10px] mt-0.5">å…¨åŠŸèƒ½èåˆç‰ˆ V5.0</p>
            </div>
            <button onclick="resetKey()" class="text-[10px] bg-slate-800 text-slate-400 px-2 py-1 rounded border border-slate-700">
                ğŸ”‘ è®¾ç½® Key
            </button>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 mt-4 space-y-6">

        <!-- 1. Special Event Section (Sunway Carnival) -->
        <section>
            <div class="flex items-center gap-2 mb-3">
                <span class="text-xl">ğŸŒŸ</span>
                <h2 class="text-sm font-bold text-slate-600 uppercase tracking-wider">å½“å‰ä»»åŠ¡ï¼šé‡é€¢å€’è®¡æ—¶</h2>
            </div>
            
            <div class="bg-gradient-to-r from-sky-600 to-indigo-600 rounded-2xl p-5 text-white shadow-lg mb-4">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-base font-bold">31å· Sunway Carnival</h2>
                        <p class="text-sky-100 text-xs mt-1">ç›®æ ‡: è®©å¥¹å¾ˆæƒ³æˆ‘ & å®Œç¾çº¦ä¼š</p>
                    </div>
                    <div class="text-2xl font-mono font-bold bg-white/20 px-3 py-1.5 rounded-lg backdrop-blur-sm" id="countdownTimer">
                        --å¤©
                    </div>
                </div>
            </div>

            <!-- Tool: Distance Spark -->
            <div class="card border-l-4 border-sky-500 bg-sky-50/50">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-base text-sky-800">âœˆï¸ å¼‚åœ°ä¼ æƒ… (27-30å·)</h3>
                </div>
                <p class="text-xs text-slate-500 mb-3">å±•ç¤ºé«˜ä»·å€¼ï¼Œåˆ¶é€ â€œå®¶é‡Œç©ºè¡è¡â€çš„æ€å¿µæ„Ÿã€‚</p>
                <select id="distanceContext" class="w-full p-2.5 border border-slate-200 rounded-lg mb-3 text-sm bg-white focus:border-sky-500 outline-none">
                    <option value="son_update">ğŸ“¸ å„¿å­å¾ˆä¹– (å±•ç¤ºç¨³é‡å¥¶çˆ¸)</option>
                    <option value="miss_you_night">ğŸŒ™ æ™šä¸Šä¸€ä¸ªäººç¡ (åˆ¶é€ æš§æ˜§)</option>
                    <option value="house_chores">ğŸ§¹ å®¶é‡Œå·²æ‰“æ‰« (è®©å¥¹å®‰å¿ƒ)</option>
                    <option value="countdown">â³ å€’æ•°æœŸå¾… (è¿æ¥å¥³ç‹)</option>
                </select>
                <button onclick="runAI('distance')" class="w-full bg-sky-600 text-white font-bold py-2.5 rounded-lg text-sm shadow active:bg-sky-700 flex justify-center items-center gap-2">
                    <span>ç”Ÿæˆä¼ æƒ…ä¿¡æ¯</span>
                    <div id="loading-distance" class="loading-spinner hidden"></div>
                </button>
                <div id="result-distance" class="mt-3 hidden p-3 bg-white rounded text-sm text-slate-700 border border-sky-100 relative shadow-sm"></div>
            </div>

            <!-- Tool: Reunion Planner -->
            <div class="card border-l-4 border-indigo-500 bg-indigo-50/50">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-base text-indigo-800">ğŸ“… 31å·é‡é€¢ç­–åˆ’</h3>
                </div>
                <p class="text-xs text-slate-500 mb-3">å¸¦ç€å„¿å­æ€ä¹ˆæµªæ¼«ï¼ŸSunway Carnival æ”»ç•¥ã€‚</p>
                <select id="reunionGoal" class="w-full p-2.5 border border-slate-200 rounded-lg mb-3 text-sm bg-white focus:border-indigo-500 outline-none">
                    <option value="first_moment">ğŸ‘‹ è§é¢ç¬¬ä¸€åˆ» (è¯æœ¯/ç¤¼ç‰©)</option>
                    <option value="dinner_talk">ğŸ½ï¸ æ™šé¤è¯é¢˜ (èŠä»€ä¹ˆ)</option>
                    <option value="movie_touch">ğŸ¬ çœ‹æˆå°åŠ¨ä½œ (é»‘æš—ä¸­çš„äº²å¯†)</option>
                    <option value="night_plan">ğŸ›Œ å›å®¶åçš„æ¿€æƒ… (æµç¨‹å®‰æ’)</option>
                </select>
                <button onclick="runAI('reunion')" class="w-full bg-indigo-600 text-white font-bold py-2.5 rounded-lg text-sm shadow active:bg-indigo-700 flex justify-center items-center gap-2">
                    <span>ç­–åˆ’å®Œç¾é‡é€¢</span>
                    <div id="loading-reunion" class="loading-spinner hidden"></div>
                </button>
                <div id="result-reunion" class="mt-3 hidden p-3 bg-white rounded text-xs text-slate-700 border border-indigo-100 prose prose-sm max-w-none shadow-sm"></div>
            </div>
        </section>

        <!-- 2. Daily Core Section (The Classics) -->
        <section>
            <div class="flex items-center gap-2 mb-3 mt-8">
                <span class="text-xl">â¤ï¸</span>
                <h2 class="text-sm font-bold text-slate-600 uppercase tracking-wider">æ—¥å¸¸æ ¸å¿ƒ (ä½ æœ€çˆ±çš„)</h2>
            </div>

            <!-- Tool: Intimacy Booster (Enhanced) -->
            <div class="card border-l-4 border-rose-600 bg-rose-50/50">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-base text-rose-800">ğŸ”¥ Booster (äº²å¯†å‡çº§)</h3>
                    <span class="text-[10px] bg-rose-100 text-rose-600 px-1.5 py-0.5 rounded font-bold">é«˜é˜¶</span>
                </div>
                <p class="text-xs text-slate-500 mb-3">è§£å†³æ€§çˆ±å‰ä¸­åçš„æ ¸å¿ƒç—›ç‚¹ã€‚</p>
                <select id="boosterGoal" class="w-full p-2.5 border border-slate-200 rounded-lg mb-3 text-sm bg-white focus:border-rose-500 outline-none">
                    <option value="aftercare">ğŸ›Œ æ€§çˆ±åï¼šå¦‚ä½•è®©å¥¹å¿ƒæ»¡ï¼Ÿ(Aftercare)</option>
                    <option value="during_sex_talk">ğŸ’¬ æ€§çˆ±ä¸­ï¼šèŠä»€ä¹ˆæ‹‰è¿‘å…³ç³»ï¼Ÿ</option>
                    <option value="passive_to_active">ğŸ’ƒ é•¿æœŸï¼šå¦‚ä½•è®©å¥¹ä¸»åŠ¨ï¼Ÿ(Seduction)</option>
                </select>
                <button onclick="runAI('booster')" class="w-full bg-rose-600 text-white font-bold py-2.5 rounded-lg text-sm shadow active:bg-rose-700 flex justify-center items-center gap-2">
                    <span>è·å–å¤§å¸ˆå»ºè®®</span>
                    <div id="loading-booster" class="loading-spinner hidden"></div>
                </button>
                <div id="result-booster" class="mt-3 hidden p-3 bg-white rounded text-xs text-slate-700 border border-rose-100 prose prose-sm max-w-none shadow-sm"></div>
            </div>

            <!-- Tool: Message (Full Version) -->
            <div class="card border-l-4 border-pink-500 bg-pink-50/50">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-base text-pink-800">ğŸ’Œ Message (æš–å¿ƒä¿¡ä½¿)</h3>
                </div>
                <p class="text-xs text-slate-500 mb-3">é’ˆå¯¹â€œè´¤è€…æ—¶é—´â€æˆ–å¿™ç¢ŒæœŸï¼Œè‡ªåŠ¨ç”Ÿæˆä¸æ²¹è…»çš„å…³å¿ƒã€‚</p>
                <select id="msgContext" class="w-full p-2.5 border border-slate-200 rounded-lg mb-3 text-sm bg-white focus:border-pink-500 outline-none">
                    <option value="post_sex_cold">æ˜¨æ™šäº²çƒ­å®Œï¼Œä»Šå¤©æ²¡æ„Ÿè§‰ (è´¤è€…æ—¶é—´)</option>
                    <option value="wife_stressed_work">å¥¹å·¥ä½œå‹åŠ›å¤§ï¼Œç»™é¼“åŠ±</option>
                    <option value="wfh_lunch">WFHåœ¨å®¶ï¼Œçº¦åˆé—´å¾®çº¦ä¼š</option>
                    <option value="apology_ignore">å¿™å·¥ä½œå¿½ç•¥äº†å¥¹ï¼Œæƒ³è¡¥æ•‘</option>
                    <option value="random_love">æ²¡ä»€ä¹ˆç‰¹åˆ«ï¼Œå°±æ˜¯æƒ³æ’©ä¸€ä¸‹</option>
                </select>
                <button onclick="runAI('message')" class="w-full bg-pink-600 text-white font-bold py-2.5 rounded-lg text-sm shadow active:bg-pink-700 flex justify-center items-center gap-2">
                    <span>ç”Ÿæˆæš–å¿ƒçŸ­ä¿¡</span>
                    <div id="loading-message" class="loading-spinner hidden"></div>
                </button>
                <div id="result-message" class="mt-3 hidden p-3 bg-white rounded text-sm text-slate-700 border border-pink-100 relative shadow-sm italic">
                    <button onclick="copyText('result-message')" class="absolute top-2 right-2 text-xs text-pink-500 font-bold">å¤åˆ¶</button>
                    <p id="content-message"></p>
                </div>
            </div>

            <!-- Tool: Deep Talk (Full Version) -->
            <div class="card border-l-4 border-teal-500 bg-teal-50/50">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-base text-teal-800">ğŸ—£ï¸ Deep Talk (æ·±åº¦è¯é¢˜)</h3>
                </div>
                <p class="text-xs text-slate-500 mb-3">é™¤äº†å­©å­å’Œé’±è¿˜èƒ½èŠä»€ä¹ˆï¼Ÿé«˜è´¨é‡èŠå¤©åº“ã€‚</p>
                <select id="topicVibe" class="w-full p-2.5 border border-slate-200 rounded-lg mb-3 text-sm bg-white focus:border-teal-500 outline-none">
                    <option value="relaxed">è½»æ¾/ç¡å‰ (Fun & Light)</option>
                    <option value="nostalgic">æ€€æ—§/å›å¿† (Memory Lane)</option>
                    <option value="future">æœªæ¥/æ¢¦æƒ³ (Dreams)</option>
                    <option value="appreciation">äº’ç›¸æ„Ÿè°¢ (Gratitude)</option>
                </select>
                <button onclick="runAI('deeptalk')" class="w-full bg-teal-600 text-white font-bold py-2.5 rounded-lg text-sm shadow active:bg-teal-700 flex justify-center items-center gap-2">
                    <span>è·å–è¯é¢˜</span>
                    <div id="loading-deeptalk" class="loading-spinner hidden"></div>
                </button>
                <div id="result-deeptalk" class="mt-3 hidden p-4 bg-white rounded text-sm text-slate-700 border border-teal-100 text-center font-medium shadow-sm">
                    <p id="content-deeptalk"></p>
                </div>
            </div>
        </section>

        <!-- 3. Rhythm Chart (Reference) -->
        <section class="opacity-70 grayscale hover:grayscale-0 transition-all duration-500">
            <h3 class="text-xs font-bold text-slate-400 text-center mb-2">å‘¨é—´èŠ‚å¥å‚è€ƒ (Weekly Rhythm)</h3>
            <div class="bg-white rounded-xl p-2 shadow-sm border border-slate-200 h-40">
                <canvas id="weeklyChart"></canvas>
            </div>
        </section>

    </main>

    <!-- API Key Modal -->
    <div id="apiKeyModal" class="fixed inset-0 bg-black/60 z-[60] flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-xl w-11/12 max-w-sm shadow-2xl">
            <h3 class="text-lg font-bold text-slate-800 mb-2">æ¬¢è¿å›æ¥</h3>
            <p class="text-sm text-slate-600 mb-4">è¯·è¾“å…¥ Google Gemini API Key ä»¥æ¿€æ´»æ‰€æœ‰åŠŸèƒ½ã€‚</p>
            <input type="password" id="apiKeyInput" placeholder="åœ¨æ­¤ç²˜è´´ Key (AIza...)" class="w-full p-3 border border-slate-300 rounded mb-4 focus:ring-2 focus:ring-sky-500 outline-none text-sm">
            <button onclick="saveApiKey()" class="w-full bg-slate-900 text-white py-3 rounded-lg font-bold">æ¿€æ´» AI</button>
            <p class="text-xs text-slate-400 mt-4 text-center">Key ä»…ä¿å­˜åœ¨ä½ çš„æ‰‹æœºä¸Šï¼Œå®‰å…¨éšç§ã€‚</p>
        </div>
    </div>

    <script>
        // --- 1. System Setup & Key Management ---
        let apiKey = localStorage.getItem("gemini_api_key");

        function checkApiKey() {
            if (!apiKey) document.getElementById("apiKeyModal").classList.remove("hidden");
        }
        function saveApiKey() {
            const input = document.getElementById("apiKeyInput").value.trim();
            if (input.length < 10) return alert("API Key æ ¼å¼ä¸å¯¹");
            localStorage.setItem("gemini_api_key", input);
            apiKey = input;
            document.getElementById("apiKeyModal").classList.add("hidden");
            alert("æ¿€æ´»æˆåŠŸï¼");
        }
        function resetKey() {
            localStorage.removeItem("gemini_api_key");
            location.reload();
        }
        window.onload = function() {
            checkApiKey();
            updateCountdown();
        };

        function copyText(elementId) {
            const text = document.getElementById(elementId.replace('result-', 'content-')).innerText;
            navigator.clipboard.writeText(text).then(() => alert("å·²å¤åˆ¶ï¼"));
        }

        // --- 2. AI Logic Controller ---
        async function runAI(type) {
            if (!apiKey) { checkApiKey(); return; }
            
            // UI Helpers
            const loading = document.getElementById(`loading-${type}`);
            const resultBox = document.getElementById(`result-${type}`);
            const contentBox = document.getElementById(type === 'message' || type === 'deeptalk' ? `content-${type}` : `result-${type}`);
            
            loading.classList.remove('hidden');
            resultBox.classList.add('hidden');

            let prompt = "";
            let systemInstruction = "";

            // --- Logic Switcher ---
            if (type === 'distance') {
                const ctx = document.getElementById('distanceContext').value;
                systemInstruction = `ä½ æ˜¯ä¸€ä½é«˜æƒ…å•†ä¸ˆå¤«åŠ©æ‰‹ã€‚ä¸ˆå¤«38å²å¸¦6å²å„¿ï¼Œå¦»37å²åœ¨å¤–åœ°ã€‚ç›®æ ‡ï¼šå±•ç¤ºé è°±ï¼ˆå¸¦å¨ƒç¨³ï¼‰ã€åˆ¶é€ æ€å¿µï¼ˆå®¶é‡Œç©ºï¼‰ã€‚é£æ ¼ï¼šæ¸©é¦¨ã€å¾®æ€§æ„Ÿã€‚`;
                if(ctx === 'son_update') prompt = "å‘ä¸€å¼ å„¿å­ç…§ç‰‡ã€‚å¤¸å„¿å­ä¹–ï¼Œæš—ç¤ºé—ä¼ å¦ˆå¦ˆï¼Œè¡¨ç°æˆ‘å¾ˆäº«å—å¸¦å¨ƒã€‚";
                if(ctx === 'miss_you_night') prompt = "æ™šä¸Šå„¿å­ç¡äº†ï¼Œæˆ‘ä¸€äººåœ¨æˆ¿ã€‚è¡¨è¾¾åºŠå¤ªå¤§ï¼Œå®‰é™å¾—ä¸ä¹ æƒ¯ã€‚å¸¦æš§æ˜§æš—ç¤ºã€‚";
                if(ctx === 'house_chores') prompt = "æˆ‘æ‰“æ‰«äº†å®¶é‡Œã€‚å‘Šè¯‰å¥¹å›æ¥æ—¶å®¶é‡Œå¾ˆèˆ’æœï¼Œè®©å¥¹åœ¨å¤–é¢æ”¾å¿ƒç©ã€‚";
                if(ctx === 'countdown') prompt = "è¿˜æœ‰å‡ å¤©å¥¹å°±å›æ¥äº†ã€‚åƒå€’æ•°æ—¥å†ä¸€æ ·ï¼Œè¡¨è¾¾æœŸå¾…ã€‚";
            }
            
            else if (type === 'reunion') {
                const goal = document.getElementById('reunionGoal').value;
                systemInstruction = `æµªæ¼«ç­–åˆ’å¸ˆã€‚31å·ä¸ˆå¤«å¸¦6å²å„¿å» Sunway Carnival æ¥å‡ºå·®å›æ¥çš„å¦»å­ã€‚éš¾ç‚¹ï¼šå¸¦å¨ƒå¦‚ä½•æµªæ¼«ï¼Ÿè¾“å‡ºï¼šMarkdownï¼Œå…·ä½“å»ºè®®ã€‚`;
                if(goal === 'first_moment') prompt = "è§é¢ç¬¬ä¸€çœ¼ã€‚å¸¦ä»€ä¹ˆï¼Ÿç¬¬ä¸€å¥è¯è¯´ä»€ä¹ˆï¼Ÿè€ƒè™‘å­©å­åœ¨åœºã€‚";
                if(goal === 'dinner_talk') prompt = "æ™šé¤èŠå¤©è¯é¢˜ã€‚1.é—®å¥¹ç»å† 2.è®²å¸¦å¨ƒè¶£äº‹ 3.é“ºå«æ™šä¸Šã€‚";
                if(goal === 'movie_touch') prompt = "ç”µå½±é™¢çœ‹æˆã€‚å„¿å­åå“ªï¼Ÿå¦‚ä½•åˆ©ç”¨é»‘æš—è‚¢ä½“æ¥è§¦ï¼Ÿ";
                if(goal === 'night_plan') prompt = "å›å®¶åã€‚å¦‚ä½•ä»ç…§é¡¾å¥¹ä¼‘æ¯å¹³æ»‘è¿‡æ¸¡åˆ°æ¿€æƒ…ï¼Ÿ";
            }

            else if (type === 'booster') {
                const goal = document.getElementById('boosterGoal').value;
                systemInstruction = `é¡¶çº§ä¸¤æ€§ä¸“å®¶ã€‚Markdownæ ¼å¼ã€‚`;
                if(goal === 'aftercare') prompt = "æ€§çˆ±åé©¬ä¸Šåšå“ª3ä»¶å°äº‹ï¼ˆè¨€è¯­/åŠ¨ä½œï¼‰ï¼Œè®©å¦»å­å¿ƒæ›´é¥±æ»¡ï¼Ÿå»ºç«‹Afterglowã€‚";
                if(goal === 'during_sex_talk') prompt = "æ€§çˆ±ä¸­èŠä»€ä¹ˆèƒ½æ‹‰è¿‘çµé­‚è·ç¦»ï¼Ÿç»™3ä¸ªè¯æœ¯ã€‚";
                if(goal === 'passive_to_active') prompt = "å¦‚ä½•è®©å¥¹ä»è¢«åŠ¨å˜ä¸»åŠ¨ï¼Ÿè§£é‡ŠåŸç†å¹¶ç»™3ä¸ªè¡ŒåŠ¨å»ºè®®ã€‚";
            }

            else if (type === 'message') {
                const ctx = document.getElementById('msgContext').value;
                systemInstruction = `å©šå§»ä¸“å®¶ã€‚ä¸ˆå¤«38å¦»37ã€‚ç”Ÿæˆç®€çŸ­ï¼ˆ50å­—å†…ï¼‰çœŸè¯šå¾®ä¿¡ã€‚å£è¯­åŒ–ã€‚`;
                prompt = `åœºæ™¯ï¼š${ctx}ã€‚å†™ä¸€æ¡çŸ­ä¿¡ã€‚`;
            }

            else if (type === 'deeptalk') {
                const vibe = document.getElementById('topicVibe').value;
                systemInstruction = `æ²Ÿé€šæ•™ç»ƒã€‚ç»™ç»“å©š7å¹´å¤«å¦»ä¸€ä¸ªæœ‰è¶£è¯é¢˜ã€‚`;
                prompt = `æ°›å›´ï¼š${vibe}ã€‚`;
            }

            // --- Call API ---
            try {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }], systemInstruction: { parts: [{ text: systemInstruction }] } })
                });
                const data = await response.json();
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text || "AI æ€è€ƒè¶…æ—¶";

                // Render
                if (type === 'message' || type === 'deeptalk') {
                    contentBox.innerText = text;
                } else {
                    contentBox.innerHTML = marked.parse(text);
                }
                
                loading.classList.add('hidden');
                resultBox.classList.remove('hidden');

            } catch (e) {
                alert("ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥");
                loading.classList.add('hidden');
            }
        }

        // --- 3. Utilities ---
        function updateCountdown() {
            const target = new Date("2025-12-31T18:00:00").getTime();
            const now = new Date().getTime();
            const diff = target - now;
            if (diff < 0) { document.getElementById("countdownTimer").innerText = "Enjoy!"; return; }
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById("countdownTimer").innerText = (days + 1) + "å¤©";
        }

        // --- 4. Mini Chart ---
        new Chart(document.getElementById('weeklyChart'), {
            type: 'line',
            data: {
                labels: ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'],
                datasets: [{
                    label: 'æœºä¼š',
                    data: [10, 75, 20, 30, 95, 80, 85],
                    borderColor: '#db2777', borderWidth: 2, tension: 0.4, pointRadius: 0
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
        });
    </script>
</body>
</html>